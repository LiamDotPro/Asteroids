<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Asteroids</title>

    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

</head>
<body>
    <h1 id="id"></h1>
    <div id="controls"><h1>Enter</h1></div>
    <div id="canvas"></div>
    <script type="text/javascript" src="/src/Canvas.js"></script>
    <script type="text/javascript" src="/src/Player.js"></script>
    <script type="text/javascript" src="/src/localGame.js"></script>
    <script>
        var socket = io();
        var canvasobj;
        var canvas;
        var canvasElem = document.getElementById('canvas');
        //setup of how the canvas should look at the beginning and setup server -> client handshake and information
        socket.on('onconnected', function (data) {
            var playerobj = new player(data.id, socket);
            $("#id").text("Client: " + data.id);
            //get canvas object
            canvasobj = new Canvas(playerobj, socket);

            //programitcally create canvas element and get values from canvas class
            canvas = document.getElementById('canvas').appendChild(canvasobj.createCanvas("front menu"));
            canvasobj.modifyCanvas(canvas, "front menu");

            $(document).ready(function () {
                $("#controls").click(function () {

                    //tells the server client has entered
                    socket.emit('enterClicked', {
                    });
                });
            });

        });

        //Notifys client location has been updated
        socket.on('movedToLobby', function () {
            canvasobj.modifyCanvas(canvas, "lobby menu");
            canvasobj.getPlayer().serverClientLocation("lobby menu");
            //empties the div of all nodes
            $("#controls").empty();
        })

        //notifys the user a lobby has been created
        socket.on('lobbyCreated', function (data) {
            canvasObj.lobbyCreated(data.lobbyID);
        });

        //Notifys client they have joined the lobby
        socket.on('userJoinedLobby', function (data) {
            canvasobj.getPlayer().joinedLobby(data.lobbyID);
        });

    </script>
</body>
</html>
